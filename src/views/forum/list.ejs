<%- include('../layout', { 
    title: 'Forum',
    body: `
<div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1><i class="bi bi-chat-dots"></i> Forum</h1>
        <a href="/forum/create" class="btn btn-primary">
            <i class="bi bi-plus-circle"></i> New Post
        </a>
    </div>
    <div class="row">
        <div class="col-md-3 mb-4">
            <div class="card">
                <div class="card-body">
                    <h5>Filters</h5>
                    <form method="GET">
                        <div class="mb-3">
                            <label class="form-label">Class</label>
                            <select class="form-select" name="classId">
                                <option value="">All Classes</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-sm btn-primary">Filter</button>
                    </form>
                </div>
            </div>
        </div>
        <div class="col-md-9">
            ${posts.length === 0 ? `
            <div class="alert alert-info">No posts found.</div>
            ` : posts.map(post => `
            <div class="card mb-3">
                <div class="card-body">
                    <h5><a href="/forum/${post._id}" class="text-decoration-none">${post.title}</a></h5>
                    <p class="text-muted">By ${post.author.name} | ${new Date(post.createdAt).toLocaleString()}</p>
                    <p>${post.content.substring(0, 200)}...</p>
                    <div>
                        <span class="badge bg-secondary">${post.comments ? post.comments.length : 0} comments</span>
                        <span class="badge bg-primary">${post.likes ? post.likes.length : 0} likes</span>
                    </div>
                </div>
            </div>
            `).join('')}
        </div>
    </div>
</div>
` }) %>

